<!DOCTYPE html>
<html lang="en">



<head>
    <link rel="icon" href="{{asset('pictures/icons/ruspinasmalllogo.png')}}" type="image/x-icon" />
    <link rel="shortcut icon" href="{{asset('pictures/icons/ruspinasmalllogo.png')}}" type="image/x-icon" />
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">

    <link rel="stylesheet" type="text/css" href="{{ asset('css/bootstrap.min.css')}} ">
    <link rel="stylesheet" type="text/css" href="{{ asset('css/lightbox.css')}} " >
    <link rel="stylesheet" type="text/css" href="{{ asset('css/soullifiedprofil.css')}} " > 
    <link rel="stylesheet" type="text/css" href="{{ asset('blue.monday/jplayer.blue.monday.css') }}" >
    <link rel="stylesheet" type="text/css" href="{{ asset('css/jquery-ui.css') }}" >
    <link rel="stylesheet" type="text/css" href="{{ asset('css/slider.css')}} " >
  
    <script type="text/javascript" src="{{ asset('js/jquery-1.7.2.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('js/jquery-ui.min.js')}} "></script>
    <script type="text/javascript" src="{{ asset('js/lightbox-2.6.min.js')}} "></script>

    <script type="text/javascript" src="{{ asset('js/jquery.jplayer.min.js') }}" ></script>
    <script type="text/javascript" src="{{ asset('js/bootstrap.min.js') }}" ></script>     
    <script type="text/javascript" src="{{ asset('js/underscore-min.js')}} "></script>
    <script type="text/javascript" src="{{ asset('js/jquery.fileupload.js')}} "></script>
    <script type="text/javascript" src="{{ asset('js/jquery.iframe-transport.js')}} "></script>
    <script type="text/javascript" src="{{ asset('js/FileUploader.js')}} "></script>
    <script type="text/javascript" src="{{ asset('js/html2canvas.js')}} "></script>


    <title>{{board.title}} </title>
</head>
<body>
<h1>percentage of the before i die + thumbs Up</h1>
{%  if board.Coverurl %}
<img id="background-pic" src="{{asset('web/uploads/tmp/attachments/'~board.Coverurl)}}" style="position:fixed;width:100%;heigth:100%;display:none;">  
{%  endif %}

   {% include "PunkAveFileUploaderBundle:Default:templates.html.twig" %}


        <div id="footer">
                 Copyright © 2013 ruspeena Inc. and respective owners. All rights reserved. <a  >  terms of use </a> <a >  privacy</a>
        </div>



<div id="side-main-menu-container">
             <div id="submenu1" class="submenu">
                  <ul class="submenu-header">  
                   <h4><b>{{board.title}}</b></h4>
                   <p> {{board.description}}</p> 
                  </ul>
             
                  <div class="submenu-item" id="comment-button" >
                    <span  class="submenu-icons-black comment-icon"></span><span class="submenu-label" >
                      Scribble
                  </span>
                  </div>



              <div class="submenu-item" id="song-button" data-toggle="modal" data-target="#doodlemodal" >
                    <span  class="smile-icon doodles"s style="background-size: 390%;"></span><span class="submenu-label"  >
                      Doodles 
                  </span>
                  </div>




                  <div class="submenu-item" id="photos-button" data-toggle="modal" data-target="#albummodal" >
                    <span class="submenu-icons-black photo-icon"></span><span  class="submenu-label"  >Photos</span>
                  </div>
             </div>

        {%  if roleflag=="Owner" %}
             <div id="submenu2" class="submenu">
                  <ul class="submenu-header">  
                   <h4><b>Settings</b></h4>
                   <p> Copyright © 2013 ruspeena Inc. and respective owners. All</p> 
                  </ul>
             
                  <div class="submenu-item" data-toggle='modal'href='#' data-target='#backgroundmodal'>
                    <span class="submenu-icons-black background-icon" ></span><span class="submenu-label" style="margin-left: -10px;margin-top: 10px;">Background</span>
                  </div>

                  <div id="preview-trigger" class="submenu-item" data-toggle='modal'href='#' data-target='#infomodal'>
                    <img src="{{asset('pictures/icons/info.png')}}" style="height:30px;margin-right: 22px;" ><span class="submenu-label">Infos</span>
                  </div>
             </div>
      {% endif %}



  


              <div id="submenu4" class="submenu" style="overflow-y: scroll;">
                  <ul class="submenu-header">  
                   <h4><b>Comments</b></h4>
                   <p> Copyright © 2013 ruspeena Inc. and respective owners. All</p> 
                  </ul>
             

     {%  for comment in board.comments %}


               {% if comment.font!="arrow" %}
         

                  <div class="submenu-item notification" style="color: black;
background-color: white;
margin-top: 5px;
margin-left: 4px;
padding-right: 2px;
padding-left: 5px;
padding-top: 1px;
cursor: auto;
margin-right: 5px;
min-height: 0px;
line-height:1;
" >
                    <span class="submenu-label"  style="font-size:10px;">

                      <a 
                  {%  if comment.owner %}
                    href="{{ asset('/profil/') }}{{comment.owner.Id}}" 
                  {% endif %}
                    style="font-weight:bolder;" >

                  {% if not comment.owner and comment.Anonyname %}
                    {{comment.anonyname}}:
                  {%  endif %}

                  {% if comment.owner and app.user %}
                    {% if comment.owner.Id==app.user.profil.Id %}
                         {{comment.owner.Fullname}} : 
                    {% endif %}
                  {% endif %}

                  {% if not app.user and comment.owner %}
                         {{comment.owner.Fullname}} : 
                  {% endif %}


                    </a>{{comment.content}}</span>
                  </div>

                {%  endif %}
                {%  endfor %}
             </div>
        {%  if roleflag=="Owner" %}
             <div id="submenu4" class="submenu" style="overflow-y:scroll;">
                  <ul class="submenu-header">  
                   <h4><b>My Boards</b></h4>
                   <p> new board </p> 
                  </ul>

            
                  <div class="submenu-item" data-toggle='modal' data-target='#loadingmodal' href="{{ path('show_my_boards_modal',{profilId:board.profil.Id})}}"  >
                    <span class="submenu-icons-black board-icon"></span><span class="submenu-label">my boards</span>
                  </div>
                 
                  
                  
                    <div class="submenu-item" data-toggle='modal' data-target='#new-board' >
                      <span class="submenu-icons-black plus-icon"></span> <span class="submenu-label" >new board</span>
                    </div>
                  

          
                </div>

      {%  else %}
           <div id="submenu4" class="submenu" style="overflow-y:scroll;">
                  <ul class="submenu-header">  
                   <h4><b>Boards</b></h4>
                   <p> new board </p> 
                  </ul>

            
                  <div class="submenu-item" data-toggle='modal' data-target='#loadingmodal' href="{{ path('fos_user_registration_register',{profilId:board.profil.Id})}}"  >
                    <span class="submenu-icons-black board-icon"></span><span class="submenu-label">similar boards</span>
                  </div>
                 
                  
      
                    <div class="submenu-item" data-toggle='modal' data-target='#new-board'>
                      <span class="submenu-icons-black plus-icon"></span> <span class="submenu-label" > create a board</span>
                    </div>
                  

          
                </div>
      {%  endif %}


        <div id="#side-main-menu"  class="side-main-menu" style="box-shadow: 0 0px 10px 0px rgba(0, 0, 0, 0.6), 0 0 20px 1px rgba(255, 255, 255, 0.5);">
            <ul class="logo-side" > 
              <li id="board-title2">
                  {{board.title}}
              </li>
            </ul>



            <ul class="menu-primary-options" submenuId="1">
              <span id="menuicon1" class="sosNeticonWhite boardicon"></span><span class="label-icon">Write</span>
            </ul>
   {%  if roleflag=="Owner" %}
            <ul  class="menu-primary-options" submenuId="2" >
              <div id="menuicon2" class="sosNeticonWhite settingicon"></div><span class="label-icon">setting</span>
            </ul>
  {%  endif %}


          <ul  class="menu-primary-options" submenuId="3" >
            <div id="menuicon3" class="sosNeticonWhite settingicon"></div><span class="label-icon">Record</span>
          </ul>



   {%  if roleflag=="Owner" %}
    
            <ul  class="menu-primary-options" submenuId="5"  data-toggle='modal' data-target='#new-board' >
              <div id="menuicon5" class="sosNeticonWhite plus-icon"></div><span class="label-icon">new board</span>
            </ul>
    

  {% else %}
     
            <ul  class="menu-primary-options" submenuId="5" >
              <div id="menuicon5" class="sosNeticonWhite board-icon"></div><span class="label-icon">boards</span>
            </ul>

  {%  endif %}

            <ul  class="menu-primary-options" submenuId="4" >
              <div id="menuicon4" class="sosNeticonWhite friends-icon"></div><span class="label-icon">Comments</span>
            </ul>


        <ul id="likesunlikes" >

            <h6> 
              <img id="likeimg" class="like-buttons" 
              {%  if liked %}
              onClick="unlikeboard()" src="{{asset('pictures/icons/like.png')}}">
              {% else %}
              onClick="likeboard()" style="opacity:0.7" src="{{asset('pictures/icons/like.png')}}"> 
              {%  endif %}      

               {% if board.likers|length == 0 %}     

                    <span id="nbrOfLikes" style="display:none;">0</span>

                {%  else %}
                    <span id="nbrOfLikes">{{board.likers|length}}</span>

                {%  endif %}

              
              <img id="comment-button-small" src="{{asset('pictures/icons/small-comment.png')}}"  class="like-buttons" style="opacity:0.7;cursor:pointer;">   

              {% if board.comments|length == 0 %}     
              <span id="nbrOfComments" style="display:none;">0</span>
              
              {% else %}

               <span id="nbrOfComments">{{board.comments|length}}</span>
              
              {%  endif %}

            </h6>
        </ul>

            <ul>
              <div id="compress-menu" onClick="compressMenu()" class="sosNeticonWhite compressicon"> </div>
            </ul>
        </div>
    </div>


<script type="text/javascript">

  function loop(albumFolder) {
          var angle=0;
          var str="#"+albumFolder+" img";
          $($(str).get().reverse()).each(function() {
          $(this).css('-webkit-transform', 'rotate('+angle+'deg)' );
          angle=angle+10;
      });
  }

</script>

    <div id="main-container"  >  

            {% for comment in board.comments %}


               {% if comment.font=="arrow" %}
         
                <img id='{{comment.Id}}' date='{{comment.date}}' ownerid='{{comment.owner.Id}}' owner='{{comment.owner.Fullname}}' class='comment' src="{{asset('pictures/icons/')}}{{comment.color}}"  style='position:absolute;top:{{comment.posx}}px;left:{{comment.posy}}px;color:{{comment.color}};-webkit-transform:{{comment.rotation}};-moz-transform:{{comment.rotation}};font-family:arrow;cursor:pointer;'>

               {% else %}
                        <div id='{{comment.Id}}' date='{{comment.date}}' 
                        {%  if comment.owner %}
                        ownerid='{{comment.owner.Id}}' owner='{{comment.owner.Fullname}}' 
                        {% elseif comment.Anonyname %}
                        owner='{{comment.Anonyname}}' 
                        {%  endif %}
                        class='comment' style='font-family:{{comment.font}};font-size:{{comment.size}};position:absolute;top:{{comment.posx}}px;left:{{comment.posy}}px;color:{{comment.color}};-webkit-transform:{{comment.rotation}};-moz-transform:{{comment.rotation}};'>
                          {{comment.content}}
                        </div>
              {% endif %}

    

           {% endfor %}
  

        {% for album in board.albums %}
        

<div class="album" id="{{album.folder}}" style="left:{{album.posx}}px;-webkit-transform:{{album.rotation}};-moz-transform:{{album.rotation}};top:{{album.posy}}px;" albumId="{{album.Id}}">
      <input id="albumId" value="{{album.Id}}" style="display:none;">
             {% for photo in album.photos %}
            
            <a class="lightbox" data-lightbox="{{photo.Id}}" title="{{album.title}}"  href="{{asset('web/uploads/tmp/attachments/'~album.folder~'/medium/'~photo.url)}}">  
                <img id="{{album.folder}}" albumId="{{album.Id}}" Title="{{album.title}}" ownername="{{board.profil.Fullname}}" ownerId="{{board.profil.Id}}" style="position: absolute;width:200%;border:0px;" 
               class="thumbnail albumphotos" 
               src="{{asset('web/uploads/tmp/attachments/'~album.folder~'/small/'~photo.url)}}" /> 
            </a>
        {% if roleflag=="Owner" %}
            <span class='small-menu-icons' style='right:35px;'>
              <img class='move-small' src='{{ asset('pictures/icons/small-move.png')  }}' onClick=setdraggable("{{album.folder}}") />
              <img class='rotate-small' src='{{ asset('pictures/icons/small-rotate.png') }}'  onClick=rotateslider("{{album.folder}}","pic") />
              <img class='delete-small'  src='{{ asset('pictures/icons/small-trash.png') }}'  onClick=removealbum("{{album.folder}}","{{album.Id}}") />
            </span>
        {%  endif %}
            {% endfor %}

             <!-- <div class="albumtitle"> {{album.title}}</div> -->
        <script type="text/javascript">

           // loop({{album.folder}});

        </script>

</div>

        {% endfor %}


                           <div id="slider-container" class="thumbnail" style="display:none;">
                             <form id="formRotateComment" method="POST" action="" > 
                                    <input id="myslider" type="text" size="10" class="slider-input">
                                    <div id="round-slider" class="slider-content"></div>  
                                      <div class="rotate-buttons" >
                                        <button class="btn btn-primary" onClick='submitRotation()' type="submit">
                                              Save changes
                                        </button>

                                        <button class="btn btn-default" onClick='resetPrevious()'>Cancel</button>
                                      </div>
                            </form>
                          </div>


<!-- Modal new board request-->
<div class="modal fade" id="new-board" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="myModalLabel">Create New</h4>
      </div>
      <div class="modal-body" style="display: flex;">
      
      <a href="{{asset('addnewboard')}}?type=wall">
        <div class="new-board-preview" style="margin-right:45px;" > 
          <span class="new-board-preview-title" href="{{asset('addnewboard')}}?wall"> Public wall</span>
          <img src="{{asset('pictures/icons/public-big.png')}}" >
          <hr>
          <div class="new-board-description" >create a public wall where every one can view and write on your wall</div>
        </div>
      </a>

          <div style="position: absolute;top: 130px;left: 272px;font-size: 40px;">or</div>

      <a href="{{asset('addnewboard')}}?type=board">
        <div class="new-board-preview" >  
          <span class="new-board-preview-title"  > Personal board</span>
          <img src="{{asset('pictures/icons/friends-big.png')}}" >
          <hr>
          <div class="new-board-description" >create a personal board and share it with your friends or family . you can control  througth privacy setting which people you want to share with. 
            or just keep it secrect</div>
        </div>
      </a>
      </div>
      <div class="modal-footer">
          
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->



<!-- Modal comment -->       
<div id="comment-container">
    <form id="comment-form" action="addcomment" method="POST"> 
  <div id="comment-form-header">

      <ul>Size
          <li>
            <div id="slider"></div> 
          </li>
      </ul>

      <ul>Font
          <li>         
            <select id="font-selector">
              <option value="JennaSue">JennaSue</option>
              <option value="THURSTON_erc_002">THURSTON</option>
              <option value="OwnThatShhhh">OwnThatShhhh</option>
              <option value="comesinhandy">comesinhandy</option>
              <option value="BrookeS">BrookeS</option>
              <option value="DiamondsPearls">DiamondsPearls</option>
              <option value="sketch_Block"> font2</option>
              <option value="FAIL____">FAIL</option>
              <option value="daniel-webfont">daniel-webfont </option>
              <option value="the_quiet_scream">the_quiet_scream </option>
            </select>
          </li>
      </ul>

      <ul>Color
          <li>
              <div id="color-select-frame"  >
              <a class="btn btn-sm btn-danger" onClick="changeColor('#d9534f')" ></a>
              <a class="btn btn-sm btn-warning" onClick="changeColor('#f0ad4e')" ></a>
              <a class="btn btn-sm btn-primary" onClick="changeColor('#428bca')" ></a>
              <a class="btn btn-sm btn-success" onClick="changeColor('#5cb85c')" ></a>
              <a class="btn btn-sm btn-default" onClick="changeColor('#ffffff')" ></a>
              <input id="color-selector" type="color"  value="#FFF">
          </div>
          </li>
      </ul>





                 


      </div>

        <br> 

        <textarea id="comment-area" style="height:105px;margin-bottom: 10px;background-color:rgba(255, 255, 255, 0.619608);" class="form-control input-lg">


        </textarea>


        {%  if not app.user %}

           <input id="anonyname" type="text" placeholder="username" class="form-control " style="display: block;width: 25%;" required >
    
        {%  endif %}

     </h4>
           
      <div class="modal-footer" style="cursor: move;">
          <button id="submit-comment" class="btn btn-primary" type="submit" > Save Changes</button> 
             </form>
          <button id="cancel-comment"  class="btn btn-default" type="reset">Cancel</button>
        
  
      </div>
    </div><!-- /.modal-content -->



  {%  if app.user %}
        
      
<!-- Modal photos-->
<div class="modal fade" id="albummodal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="myModalLabel">Upload photos</h4>
      </div>
      <div class="modal-body">
          <form class="edit-form" action="{{ path('edit', { id: posting.id, editId: editId,boardId:board.Id }) }}" method="post" {{ form_enctype(formalbum) }}>
            {{ form_widget(formalbum) }}
         {# Hydrated by javascript #}    <div class="file-uploader"></div>

      </div>
      <div class="modal-footer">
          <a class="btn btn-default" data-dismiss="modal" href="{{ cancel }}">Cancel</a>
          <button class="btn btn-primary" type="submit">{{ isNew ? "Save New Listing" : "Save Changes" }}</button> 

 </form>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->


     
<!-- Modal doodles-->
<div class="modal fade" id="doodlemodal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="myModalLabel">Doodles </h4>
      </div>
      <div class="modal-body">
      <img class="thumbnail doodle-preview" data-dismiss="modal"  onClick='addArrow(1)' src="{{asset('pictures/icons/1whitearrow.png')}}">
        

      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
 
{%  endif %}
     
<!-- Modal loading page -->
<div class="modal fade" id="loadingmodal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content" style="text-align: center;height: 320px;padding-top: 110px;">
      <img src="{{asset('pictures/icons/loading.gif')}}" >
    </div>
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
 

{% if roleflag=="Owner" %} 


<!-- Modal info-->
<div class="modal fade" id="infomodal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="myModalLabel">Change Board Infos</h4>
      </div>
      <div class="modal-body">

          <form class="edit-form" action="{{ asset('editboard/') }}{{board.Id}}" method="post" {{ form_enctype(formboard) }}>
            {{ form_widget(formboard) }}
         
      </div>
      <div class="modal-footer">
          <a class="btn btn-default" data-dismiss="modal" href="{{ cancel }}">Cancel</a>
          <button class="btn btn-primary" type="submit">{{ isNew ? "Save New Listing" : "Save Changes" }}</button> 

 </form>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->








<!-- Modal Background-picture -->
<div class="modal fade" id="backgroundmodal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="myModalLabel">Change Background Wallpaper</h4>
      </div>
      <div class="modal-body" style="min-height: 240px;">

{% if board.Coverurl %}

  <img id="background-preview" class="thumbnail" style="height:200px;width:200px;margin-bottom:10px;box-shadow: 0 4px 6px -4px rgba(0, 0, 0, 0.6), 0 0 0px 1px rgba(255, 255, 255, 0.5);"  src="{{asset('web/uploads/tmp/attachments/'~board.Coverurl)}}" ml>
    
{% endif %}


<div id="background-preview-group" >
                 <img  class="small-background-preview" onClick="setPredefinedBackground(this)" src="{{asset('pictures/background/bluewood.jpg')}}" >

                  <img  class="small-background-preview" onClick="setPredefinedBackground(this)" src="{{asset('pictures/background/brownwood.jpg')}}" >


                  <img  class="small-background-preview" onClick="setPredefinedBackground(this)"  src="{{asset('pictures/background/paper1.jpg')}}" >


                  <img  class="small-background-preview" onClick="setPredefinedBackground(this)"  src="{{asset('pictures/background/whitewood.jpg')}}" >
                  
                  <img  class="small-background-preview" onClick="setPredefinedBackground(this)"  src="{{asset('pictures/background/greenboard.jpg')}}" >


</div>


          <form class="edit-form" action="{{ path('edit_backgroundurl', { id: posting.id, editId: editId,boardId:board.Id }) }}" 
                method="post">
           <input type="hidden" name="predefinedbackgroud" id="predefinedbackgroud" >
      
          <div class="file-uploader"></div>


      </div>
      <div class="modal-footer">
          <a class="btn btn-default" data-dismiss="modal" href="{{ cancel }}" onClick="resetBackground()" >Cancel</a>
          <button class="btn btn-primary" type="submit">{{ isNew ? "Save New Listing" : "Save Changes" }}</button> 
            {% if board.Coverurl %}
                <a class="btn btn-danger" href="{{ path('remove_background', { boardId: board.id } ) }}">Delete</a>
            {% endif %}

 </form>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->



{%  endif %}

{%  if app.user %}

        <script type="text/javascript">

            // Enable the file uploader

            $(function() {
                new PunkAveFileUploader({ 
                    'uploadUrl': {{ path('upload', { editId: editId }) | json_encode | raw }},
                    'viewUrl':  "{{ 'web/uploads/tmp/attachments/' ~ editId | json_encode | raw }}",
                    'el': '.file-uploader',
                    'existingFiles': {{ existingFiles | json_encode | raw }},
                    'delaySubmitWhileUploading': '.edit-form'
                });
            });


        </script>

{% endif %}
   
                        
               
  {% if roleflag=="notafriend" %}

            <script type="text/javascript">
              $("#board-owner").popover({title:"<div class='notification' style='padding:7px;'><b>Send<a > {{board.profil.Fullname}} </a>a Friend Request <b><br><button class='btn btn-success btn-sm'  data-toggle='modal' data-target='#friendrequestmodal' style='margin-right:5px;'>Send Request</button><button class='btn btn-default btn-sm' data-target='#messagmodal'  data-toggle='modal'>Message</button></div>",html:true,placement:"bottom",trigger:"hover",delay:{hide: 1500}});

            </script>
            {% endif %}

            {% if roleflag=="friendseeker" %}
              <script type="text/javascript">

              $("#board-owner").popover({title:"<div class='notification' style='padding:7px;'><b>Send<a > {{board.profil.Fullname}} </a> a Friend Request <b><br><button class='btn btn-info btn-sm disabled ' style='margin-right:5px;'>Request Sent</button><button class='btn btn-default btn-sm' data-target='#messagmodal'  data-toggle='modal'>Message</button></div>",html:true,placement:"bottom",trigger:"hover",delay:{hide: 1500}});

              </script>
                          
            {% endif %}
         

    </div>
</div>


{%  if app.user %}

  <div id="header">                


                      <ul id="main-menu-dropdown" class="dropdown-menu" style="font-size: 15px;right: 0px;left: inherit;display:none;" role="menu" aria-labelledby="dLabel">      
                             
                        <li role=presentation >
                          <a role=menuitem tabindex='-1' href="{{asset('profil/')}}{{app.user.profil.Id}}" >
                           <img src="{{asset('pictures/icons/tinyUserBlack.png')}}" style='height: 16px;'> Me
                          </a>
                        </li>

                      <li role=presentation>
                         <a role=menuitem tabindex='-1' href="{{asset('myboards')}}" >
                               <img src="{{asset('pictures/icons/tinyBoardBlack.png')}}" style='height: 16px;'> My boards
                         </a>
                       </li>
                       

                       <li role=presentation>
                          <a role=menuitem tabindex='-1' >
                            <img src="{{asset('pictures/icons/tinyConfigBlack.png')}}" style='height: 16px;'> 
                            Settings
                          </a>
                        </li>
    
                       <li role=presentation>
                          <a role=menuitem tabindex='-1' >
                           <img src="{{asset('pictures/icons/tinyReportBlack.png')}}" style='height: 16px;'> Feedback
                          </a>
                        </li>

                       <li role=presentation>
                         <a role=menuitem tabindex='-1' >
                            <img src="{{asset('pictures/icons/equalizer2.gif')}}" style='height: 30px;margin-left: -6px;margin-right: 1px;'> 
                            Music player
                          </a>
                        </li>
    

                       <li role=presentation>
                          <a role=menuitem tabindex='-1' href="{{asset('logout')}}" >
                          <img src="{{asset('pictures/icons/tinySwitchOffBlack.png')}}" style='height: 16px;'>
                           Log out
                          </a>
                        </li>

                      </ul>
                  <img id="messages"  src="{{asset('pictures/icons/chat-small.png')}}" />
                  <img id="Friend-requests" src="{{asset('pictures/icons/flag.png')}}" />
                  <a href="/app_dev.php/home">
                  <img id="home" src="{{asset('pictures/icons/home-small.png')}}" />
                  </a>
                                   <a id="myname" onClick="displayMainMenue()" >{{app.user.profil.Fullname}}
                    <img id="profilpicthumb" style="opacity:1" 
                    {%  if app.user.profil.photourl %}
                    src="{{asset('web/uploads/tmp/attachments/')}}{{app.user.profil.photourl.album.folder}}/thumbnails/{{app.user.profil.photourl.url}}" />
                    {% else %}
                      src="" />
                    {%  endif %}
                  </a>


</div>

{%  endif %}

<div  id="commentPic" style="width: 21%;
      top: 0;
      right: 2%;
      position: absolute;
      height: 570px;
      color: black;
      box-shadow: 0 1px 1px 0px rgba(0, 0, 0, 0.2), 0 0 2px 1px rgba(255, 255, 255, 0.5);
      margin-bottom: 8px;
      padding: 6px;
      padding-left: 10px;
      padding-right: 5px;
      line-height: 1.428571429;
      background-color: #fff;
      display:none;
      "
>


</div>

</div>

      </body>


<style type="text/css">


.sr-only{
  background-color: #B8CCFF;
}

{% if roleflag=="Owner" %} 
.popover-title{
  padding-right: 70px;
}
{% endif %}

.dropdown{
  position: absolute;
  right: 0px;
  margin-left: 21px;
  top: 0px;
}
.album{
  width: 100px;
  position: absolute;
  cursor: pointer;
  left: 566px;
  top: 160px;
}

#arrows{
  display: none;
}


.albumtitle{
  font-size: 46px;
  position: absolute;
  /*top: 448px;*/
  /*left: 372px;*/
  bottom: 50px;
  left: 10px;
  font-family: JennaSue;
}

.albumphotos{
 -webkit-transform: rotate(0deg);
 -moz-transform: rotate(0deg);
  border-radius: 0px;
  box-shadow: 0 3px 10px 1px rgba(0, 0, 0, 0.6), 0 0 20px 1px rgba(255, 255, 255, 0.5);
}

.board-icon{
  background-position: 435px -361px;
}

#slider{
   display: inline-block;
   width: 134%;
   cursor:pointer;
   margin-left: -37px;
}
#rotate
{
   width: 40%;
   cursor:pointer;
}
 #right-side-menue{
    position: fixed;
    height: 78%;
    top: 70px;
    width: 5%;
    background-color: black;
  }

#main-container{
  position: relative;
}

#comment-container{
    display: none;
    width: 500px;
    position: absolute;
    top:200px;
    z-index: 10;
    left: 300px;
    background-color: rgba(122, 122, 122, 0.37);
    box-shadow: 0 5px 12px -1px rgba(0, 0, 0, 0.6), 0 0 200px 1px rgba(255, 255, 255, 0.5);
  }

    @font-face{
        font-family:OpenSans-Light;
        src:url("{{asset('fonts/OpenSans-Light.ttf')}}");
    }

 body{

  background-size:cover;
  height: 100%;
{% if board.Coverurl %}
    background-image: url("{{asset('web/uploads/tmp/attachments/'~board.Coverurl)}}");
{% else %}
    background-image:url("{{asset('pictures/background/default.jpg')}}");
{% endif %}

 }

 #lifetrack{
  display: inline-block;
  margin-top: -25px;
  vertical-align: -15px;
  margin-left: -30px;
 }

#slider-container{
  margin: 0 auto;
  padding: 14px;
  z-index: 10;
  opacity: 0.8;
  position: absolute;
  margin-top: -77px;
  box-shadow: 0 5px 10px 1px rgba(0, 0, 0, 0.6), 0 0 200px 1px rgba(255, 255, 255, 0.5);
}

.comment{
    line-height: 80%;
    cursor: default;
    max-width: 500px;
}


#soullified_profilbundle_board_Commentprivacy , #soullified_profilbundle_board_Viewprivacy{
  font-size: 20px;
  border: none;
  background-color: transparent;
}

select:hover{
   box-shadow: 0 1px 1px 0px rgba(0, 0, 0, 0.2), 0 0 2px 1px rgba(255, 255, 255, 0.5);
}


label{
  margin-top: 29px;
  font-size: 20px;
  font-weight: normal;
}

#comment-area{
  height: 105px;
  margin-bottom: 10px;
  font-size: 20px;
  font-family: JennaSue;
  background-color: rgba(255, 255, 255, 0.619608);
}

#color-select-frame a{
  border-radius: 0px;
  height: 20px;
}


.input-artist{
  position: absolute;
  top: 20px;
  right: 21px;
}

.dropdown-menu{
  z-index: 20;
}

}
.menu_item{
  margin-right: 25px;
}

.popover.right .arrow:after{
  border-right-color: #f7f7f7;
}

.popover.left .arrow:after{
  border-left-color: #f7f7f7;
}

a{
  cursor: pointer;
}

#comment-form-header{
  background-color: rgba(255, 255, 255, 0.38);
  width: 100%;
  padding-left: 10px;
}

#comment-form-header ul{
  list-style-type: none;
  font-size: 16px;
  font-weight: bold;
  min-width: 134px;
  margin-bottom: 0px;
  margin-top: 0px;
  display: inline-block;
}


#comment-form-header ul:hover{
  background-color: white;
}
#font-selector{
  display: inline-block;
  height: 28px;
  margin-left: -39px;
  line-height: 28px;
  border: 1px solid #aaa;
  padding: 4px;
  color: #555;
}

.send-frequest{
  background-color:rgb(226, 255, 199);
}

.send-frequest:hover{
  background-color: rgb(195, 255, 139);
}


#myname{
  text-decoration: none;
  color: white;
  font-size: 21px;
  font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
  cursor: pointer;
}

#myname:hover{
  opacity: 1;
}
.description{
  min-height: 160px;
}

.modal-body input{
  width: 45%;
}
.side-main-menu{
  z-index: 11;
  -webkit-box-shadow: 0 0 19px -1px rgba(0, 0, 0, 0.1);
  -moz-box-shadow: 0 0 19px -1px rgba(0, 0, 0, 0.1);
  -ms-box-shadow: 0 0 19px -1px rgba(0, 0, 0, 0.1);
  -o-box-shadow: 0 0 19px -1px rgba(0, 0, 0, 0.1);
  box-shadow: 0 0 19px -1px rgba(0, 0, 0, 0.1);
  -webkit-transition: width 0.25s;
  -moz-transition: width 0.25s;
  -ms-transition: width 0.25s;
  -o-transition: width 0.25s;
  transition: width 0.25s;
  -webkit-transform: translate3d(0, 0, 0);
  -moz-transform: translate3d(0, 0, 0);
  -ms-transform: translate3d(0, 0, 0);
  -o-transform: translate3d(0, 0, 0);
  transform: translate3d(0, 0, 0);
  background: #191B1F;
  bottom: 0;
  position: fixed;
  top: 0;
  width: 175px;
  height: 100%;
}



#background-preview-group{
  position: absolute;
  top: 20px;
  right: 9px;
  overflow-y: scroll;
  height: 270px;
  width: 262px;
}


.sosNeticonWhite{
  display: inline-block;
  width: 40px;
  vertical-align: -17px;
  height: 45px;
  background-image: url("{{asset('pictures/icons/transparent-preview.png')}}");
  transition-property:background-image;
  transition-duration: 0.5s;
}

.doodles{
  margin-left: -3px;
  margin-right: 14px;
  display: inline-block;
  width: 45px;
  vertical-align: -17px;
  height: 45px;
  background-image: url("{{asset('pictures/icons/doodlepng.png')}}");
  transition-property:background-image;
  transition-duration: 0.5s;
}

.doodle-preview{
  cursor: pointer;

}

.sosNeticonBlack{
  display: inline-block;
  width: 45px;
  vertical-align: -17px;
  height: 45px;
  background-image: url("{{asset('pictures/icons/transparent-preview-black.png')}}");
  transition-property:background-image;
  transition-duration: 0.5s;
}


.smallSosNeticonBlack {
  display: inline-block;
  width: 45px;
  vertical-align: -17px;
  height: 45px;
  background-image: url("{{asset('pictures/icons/transparent-preview-black.png')}}");
  transition-property:background-image;
  transition-duration: 0.5s;
}


.sosNeticonWhite:hover{
  background-image: url("{{asset('pictures/icons/transparent-preview-black.png')}}");
}

.settingicon {
  background-position:-53px 592px;
}

.smile-icon{
  background-position: -592px -357px;
}

.boardicon {
  background-position: -109px -408px
}

.plus-icon{
    background-position: 606px 361px;
}
.ownericon {
  background-position: -924px -1390px;
}

.commentsicon{
 background-position: 146px -221px;
}
.likeicon{
  background-position: 0px -180px;
}


.small-background-preview{
  width: 60px;
  height: 60px;
  border: 1px solid #ddd;
  border-radius: 0px;
  padding: 3px;
  background-color: white;
  margin-left: 10px;
  margin-bottom: 10px;
  display: inline-block;
  box-shadow: 0 4px 6px -4px rgba(0, 0, 0, 0.6), 0 0 0px 1px rgba(255, 255, 255, 0.5);
  opacity: 0.7;
}

.small-background-preview:hover{
  opacity: 1;
}


#likesunlikes{
  color: white;
  display: inline;
  font-weight: bold;
  position: absolute;
  top: 100px;
  right: 10px;
}
.like-buttons{
  vertical-align: text-bottom;
  margin-left:5px;
  cursor:pointer;
}
.like-buttons:hover{
  opacity: 1;
}

.unlikeicon{
  background-position: 0px -180px;
}
.compressicon{
  background-position: 201px 364px;
}

.likeicon{
  background-position:1033px 719px;
}
#compress-menu{
  margin-left: 0px;
  position: absolute;
  bottom: 0px;
  right: -8px;
  cursor: pointer;
}


.menu-primary-options{
  height: 40px;
  margin-bottom: 0px;
  margin-left: -20px;
  font-size: 14px;
  font-weight: bold;
  color: white;
  cursor: pointer;
  background-color: #1f2228;
  border-top: 1px solid #262930;
  border-bottom: 1px solid #191b1f;
  text-transform: uppercase;
}

.menu-primary-options:hover{
    background-color: #f2f6f7;
    /*border-color: #f2f6f7;*/
    color: #5a6273;
 }

.menu-primary-options li{
  display: none;
}

.submenu{
  background: #f2f6f7;
  bottom: 0;
  color: #494f5b;
  height: 100%;
  left: 40px;
  padding: 0;
  position: fixed;
  top: 0;
  width: 135px;
  z-index: 10;
}

.logo-side{
  font-size: 26px;
  color: white;
  text-align: center;
  margin-left: -46px;
  margin-top: 40px;
  min-height: 70px;
  list-style:none;
  margin-bottom: 30px;
}

.submenu-header{
  background: transparent;
  border-bottom: 1px solid white;
  min-height: 140px;
  padding: 1px 7px;
  margin-bottom: 0px;
  width: auto;
}


.submenu-header:hover{
  background-color: white;
}


.submenu-header p{
  color: #a8adb0;
  font-weight: none;
  font-size: 12px;
  line-height: 16px;
  margin: 18px 0 0 0;
  padding: 0;
  width: auto;
}


.submenu-item{
  display: flex;
  background: transparent;
  border-bottom: 1px solid white;
  min-height: 100px;
  min-height: 65px;
  padding: 10px 10px;
  width: auto;
  font-size: 15px;
  cursor: pointer;
}

.submenu-item:hover{
  /*background-color: white;*/
  background-color: #428bca;
  color: white;
}


.submenu-icons-black{
  display: inline-block;
  width: 55px;
  vertical-align: -17px;
  height: 40px;
  background-image: url("{{asset('pictures/icons/transparent-preview-black.png')}}");
}

.submenu-icons-white{
  display: inline-block;
  width: 55px;
  vertical-align: -17px;
  height: 40px;
  background-image: url("{{asset('pictures/icons/transparent-preview.png')}}");
}


.comment-icon{
    background-position: -163px -410px;
}

.everyone-icon{
  background-position: -63px -899px;
}

.onlyme-icon{
  background-position: -835px -494px;
}
.friends-icon{
  background-position: -572px 314px;
}
.message-icon{
  background-position: -693px -304px;
}

.song-icon{
  background-position:  -1033px -1205px;
}

.photo-icon{
 background-position:  3px 126px;
}

.join-icon{
 background-position:  -80px 346px;
}


.background-icon{
 background-position: -114px 127px;
}


.new-board-preview-title{
  display: block;
  font-size: 20px;
}

.new-board-preview{
  margin-left: 5px;
  height: 260px;
  padding-top: 15px;
  text-align: center;
  width: 240px;
  background-color: white;
  box-shadow: 0 1px 1px 0px rgba(0, 0, 0, 0.2), 0 0 2px 1px rgba(255, 255, 255, 0.5);
  cursor: pointer;
  opacity: 0.7;
}
a:hover{
  text-decoration: none;
}

.new-board-preview:hover{
  opacity: 1;
  text-decoration: none;
}

.new-board-description{
  font-family: OpenSans-Light;
  color: grey;
  text-align: left;
  font-size: 14px;
  padding: 5px;
}


#header{
  padding-left:2px;
  width: auto;
  right: 0px;
  padding-left:8px;
  background: rgba(0, 0, 0, 0.2);
  box-shadow: 0 1px 10px 1px rgba(0, 0, 0, 0.6), 0 0 20px 1px rgba(255, 255, 255, 0.5);
}


.small-menu-icons{
  display: none;
  position: absolute;
  top: 2px;
  right: 4px;
  height: 19px;
  width: 65px;
  background-color: rgba(255, 255, 255, 0.58);
}

.small-menu-icons img{
  cursor: pointer;
  padding-left: 3px;
  opacity:0.5;
}

.small-menu-icons img:hover{
  opacity:1;
}

.arrow-prview{
  display: inline;
  margin-left: 3px;
  border:1px solid;
}

.comment-only{
  position: absolute;
  left: 71%;
  top: 6px;
  opacity: 0.8;
  cursor:pointer;
}

.selected{
      border-color: #66afe9;
      outline: 0;
      -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,0.075),0 0 8px rgba(102,175,233,0.6);
      box-shadow: inset 0 1px 1px rgba(0,0,0,0.075),0 0 8px rgba(102,175,233,0.6);
    }

#color-select-frame{
  margin-left: -34px;
}


#color-select-frame button{
  width: 20px;
  height: 20px;

}
.comment-only:hover{
  opacity: 1;
}


.thumbnail-image{
  display: none;
}

.notification{
  color: black;
  box-shadow: 0 1px 1px 0px rgba(0, 0, 0, 0.2), 0 0 2px 1px rgba(255, 255, 255, 0.5);
  margin-bottom: 8px;
  padding: 6px;
  padding-left: 10px;
  padding-right: 5px;
  line-height: 1.428571429;
  background-color: #fff;
  display: block;
}

.songnot{
  font-size: 20px;
  color: grey;
  font-weight: 100;
  background-color: #F7F7F7;
}

#board-title2{
  font-family: OpenSans-Light;
  width: 165px;
  font-size: 20px;
}

.nothover{ 
  padding-right: 10px;
  cursor: pointer;
}

.notiseen{
  background-color: #E9E9E9;
}

.nothover:hover{
  background-color: #E9E9E9;
}

.like{
  margin-left: 123px;
  margin-right: 6px;
  background-color: #EDF8EC;
}
#header img{
  cursor: pointer;
  height: 25px;
  margin-right: 10px;
  opacity: 0.7;
}

#header img:hover{
  opacity: 1;
}

.like:hover{
  background-color: #C4DBC2;
}
.unlike{
  background-color: #F8ECEC;
}

.unlike:hover{
  background-color: #DBC2C2;
}

#header .popover .popover-title{

  padding-right: 10px;
}

.popover{
  z-index:10;
}

#dropdownconfig{
  position: absolute;
  right: 36%;
}

.message-content{
  /*margin-right: 5px;*/
  color: #A2A2A2;
}

.rotate-buttons{
  margin-top: 20px;
}
.comment-owner{
  margin-right: 5px;
  font-weight: bold;
}

slider a{
  display: none;
}

.modal-body{
  background-color: #F7F7F7;
  margin-bottom: -15px;
}

.modal-body input{
  margin-bottom: 10px;
}

.message-area{  
  width: 536px;
  min-height: 247px;
}

#board-owner{
  font-family: comesinhandy;
  color: black;
  margin-left: 30px;
}


.alert {
    width: 200px;
    background-color: black;
    background-color: rgba(30, 30, 30, 0.9);
    text-shadow: 1px 1px black;
    color: #eee;
    padding-left: 65px;
    box-shadow: 4px 3px 15px rgba(0,0,0,0.9);
    border: 0;
    background-repeat: no-repeat;
    background-position: 15px 50%;
    display: none;
    z-index: 1000;
}
 
.alert .close {
    color: white;
    color: rgba(255, 255, 255, 0.8);
    text-shadow: 0 1px 0 #000;
    opacity: 1;
}


#board-tools-menue img{
  cursor: pointer;
  height: 25px;
}

.small-menu-icons img{
  cursor: pointer;
  padding-left: 3px;
  opacity: 0.5;
}

.small-menu-icons img:hover{
  opacity: 1;
}



</style>

<script type="text/javascript">
   
  
function acceptRequest(requestId){
  //faut que ca soit securisé il faut que on verif a partit du controlleur
  $('div[notificationId='+requestId+']').fadeOut();


      var url="{{ asset('acceptfrequest/') }}";
      url=url+requestId;

   $.get(url,
        function(data){   
           //the response is in the data variable
            if(data.responseCode==200 ){
                      
            
            }
           else if(data.responseCode==400){//bad request
              
              
           }
           else{
              //if we got to this point we know that the controller
              //did n
             // return a json_encoded array. We can assume that           
              //an unexpected PHP error occured
              //alert("An unexpeded error occured.");

           }
         }
       );


}


function cancelRequest(requestId){
  //faut que ca soit securisé il faut que on verif a partit du controlleur
  $('div[notificationId='+requestId+']').fadeOut();

      var url="{{ asset('declinerequest/') }}";
      url=url+requestId;

   $.get(url,
        function(data){   
           //the response is in the data variable
            if(data.responseCode==200 ){
                      
            
            }
           else if(data.responseCode==400){//bad request
              
              
           }
           else{
              //if we got to this point we know that the controller
              //did n
             // return a json_encoded array. We can assume that           
              //an unexpected PHP error occured
              //alert("An unexpeded error occured.");

           }
         }
       );


}





   $(function() {
   // $( ".album" ).draggable();
    //$( ".comment" ).draggable();
    $("#comment-container").draggable();
  });

   $(".album img").mouseup(function(){
            var parent=$(this).parent().parent();
            
     var offset = parent.offset();


          $(this).parent().parent().draggable('disable');
          $(this).parent().parent().css('opacity',1);
           
           parent.css("border", "");
           parent.css("cursor","default")
           var albumId=parent.find("input").val();
           var url="{{ asset('updateposalbum/') }}";
           url=url+albumId;
       //start send the post request
       $.post(url,{
           left:parent.css("left"),
           top:parent.css("top"),
      },function(data){   
           //the response is in the data variable
            if(data.responseCode==200 ){
            //  alert(data.resultat); 
            }
           else if(data.responseCode==400){//bad request
              
              
           }
           else{
              //if we got to this point we know that the controller
              //did not return a json_encoded array. We can assume that           
              //an unexpected PHP error occured
              //alert("An unexpeded error occured.");

           }
       });//It is silly. But you should not write 'json' or any thing as the fourth parameter. It should be undefined. I'll explain it futher down

      //we dont what the browser to submit the form
   });



    $(".comment").mouseup(function(){

          $(this).css("border", "");
          $(this).css("cursor","default");
          $(this).draggable('disable');
          $(this).css('opacity',1);

           var leftpx=$(this).css("left");
           var toppx=$(this).css("top");
           var url;1
           var commentId=$(this).attr("id");
          // alert(commentId);
          url="{{ asset('updateposcomment/') }}";
           url=url+commentId;
          
       //start send the post request
       $.post(url,{
           left:leftpx.replace("px",""),
           top:toppx.replace("px",""),
      },function(data){   
           //the response is in the data variable
            if(data.responseCode==200 ){
              
            //  alert(data.resultat); 
            }
           else if(data.responseCode==400){//bad request
              
              
           }
           else{
              //if we got to this point we know that the controller
              //did not return a json_encoded array. We can assume that           
              //an unexpected PHP error occured
              //alert("An unexpeded error occured.");

           }
       });//It is silly. But you should not write 'json' or any thing as the fourth parameter. It should be undefined. I'll explain it futher down

      //we dont what the browser to submit the form
   });




  $("#cancel-comment,.close").click(function() {
    $("#comment-container").fadeOut();
  });


function changeColor(color){
    alert("color changed")
    document.getElementById('comment-area').style.color=color;
    $("#color-selector").val(color);
}

 $("#comment-button").click(function() {
    $("#comment-container").css("top","25%");
    $("#comment-container").css("left","35%");
    $("#comment-container textarea").val("");
    $("#comment-container textarea").css("color","black");
    $("#submit-comment").removeAttr("disabled");
    $(".modal-footer").css("cursor","move");
    $("#comment-container").fadeIn();
  }

    );


 $("#comment-button-small").click(function() {
    $("#comment-container").css("top","25%");
    $("#comment-container").css("left","35%");
    $("#comment-container textarea").val("");
    $("#comment-container textarea").css("color","black");
    $("#submit-comment").removeAttr("disabled");
    $(".modal-footer").css("cursor","move");
    $("#comment-container").fadeIn();
    $(this).css("opacity",1);
  }

    );



$(function() {
    var aFontsSizeArray = new Array('20','25','30', '35', '40','45');
    $('#slider').slider({
        value: 1,
        min: 1,
        max: 5,
        step: 1,
        slide: function(event, ui) {
            var sFontSizeArray = aFontsSizeArray[ui.value];
            // $('#font_size').val(sFontSizeArray + ' px');
            $('#comment-area').css('font-size', sFontSizeArray + 'px' );
        }
    });
   // $('#font_size').val((aFontsSizeArray[$('#size-selector').slider('value')]) + ' px');
});

 $("#font-selector").change(function() {

  var font=$(this).val();
  document.getElementById('comment-area').style.fontFamily=font;//css("font",font);
  
 }
);

  $("#color-selector").change(function() {
    var color=$(this).val();
    document.getElementById('comment-area').style.color=color;
  
 }
);


//rotate a comment

  $("#formRotateComment").submit(function(){
      //get the url for the form
           
           if($(this).attr("commentId")!=null) {
            var id=$(this).attr("commentId");
            var url="{{ asset('updaterotcomment/') }}";
            var deg=$("#"+id).css("-webkit-transform");       
            if(!deg)
              deg=$("#"+id).css("-moz-transform");

          }
           else {
            var url="{{ asset('updaterotalbum/') }}";
            var id=$(this).attr("pictureId");
            var deg=$("[albumId="+id+"]").css("-webkit-transform");
            if(!deg)
              deg=$("#"+id).css("-moz-transform");

           }
          // alert("rorta")
           url=url+id;
      

       $.post(url,{
           deg:deg,
         },function(data){   
           //the response is in the data variable
            if(data.responseCode==200 ){
          
            }
           else if(data.responseCode==400){//bad request
              
              
           }
           else{
              //if we got to this point we know that the controller
              //did not return a json_encoded array. We can assume that           
              //an unexpected PHP error occured
              //alert("An unexpeded error occured.");

           }
       });//It is silly. But you should not write 'json' or any thing as the fourth parameter. It should be undefined. I'll explain it futher down

      //we dont what the browser to submit the form
    return false;
   });




//addd-a -new comment
function submit_comment(id,top,left){

      $("#comment-container").fadeOut();

{%  if app.user %}

    commentHtml="<div id="+id+" class='comment' ownerid='{{app.user.profil.Id}}' owner='{{app.user.profil.fullname}}'  style='font-family:"+$("#font-selector").val()+";font-size:"+$("#comment-area").css("font-size")+";position:absolute;top:"+top+"px;left:"+left+"px;color:"+$("#color-selector").val()+";-webkit-transform:"+$("#comment-area").css("-webkit-transform")+";-moz-transform:"+$("#comment-area").css("-webkit-transform")+"'>"+$("#comment-container textarea").val()+"</div>";
{%  else %}
    var ownername=$("#anonyname").val();
    commentHtml="<div id="+id+" class='comment' ownerid='' owner='"+ownername+"'  style='font-family:"+$("#font-selector").val()+";font-size:"+$("#comment-area").css("font-size")+";position:absolute;top:"+top+"px;left:"+left+"px;color:"+$("#color-selector").val()+";-webkit-transform:"+$("#comment-area").css("-webkit-transform")+";-moz-transform:"+$("#comment-area").css("-webkit-transform")+"'>"+$("#comment-container textarea").val()+"</div>";

{% endif %}  
  var nbr= document.getElementById("nbrOfComments").innerHTML;
  nbr++;
  document.getElementById("nbrOfComments").innerHTML=nbr;
  

  $("#main-container").append(commentHtml);
 
    $(".comment").mouseup(function(){

           $(this).css("border", "");
           $(this).css("cursor","default")
           var leftpx=$(this).css("left");
           var toppx=$(this).css("top");
           var url;
           var commentId=$(this).attr("id");
           url="{{ asset('updateposcomment/') }}";
           url=url+commentId;
       $.post(url,{
           left:leftpx.replace("px",""),
           top:toppx.replace("px",""),
      });

     });

    $(".comment").mouseenter(function(){
      comment=$(this);
      popoverComment(comment);
    });



}

{%  if app.user %}
//addd-a -new comment
function submit_arrow(id,type,top,left){

    var pictureUrl="{{asset('pictures/icons/')}}"+type+"whitearrow.png";
 
    commentHtml="<div id="+id+" class='comment' ownerid='{{app.user.profil.Id}}' owner='{{app.user.profil.Fullname}}' style='font-family:arrow;position:absolute;top:"+top+"px;left:"+left+"px;-webkit-transform:"+$("#comment-area").css("-webkit-transform")+"'><img id='arrow' src='"+pictureUrl+"' ></div>";
  
  $("#main-container").append(commentHtml);
  $("#"+id).draggable();





    $(".comment").mouseup(function(){
      
           $(this).css("border", "");
           $(this).css("cursor","default")
           var leftpx=$(this).css("left");
           var toppx=$(this).css("top");
           var url1;
           var commentId=$(this).attr("id");
           url="{{ asset('updateposcomment/') }}";
           url=url+commentId;

       $.post(url,{
           left:leftpx.replace("px",""),
           top:toppx.replace("px",""),
      });

     });

    $(".comment").mouseenter(function(){
      comment=$(this);
      popoverComment(comment);
    });


}


{%  endif %}

// ajax dude ajax !!
  //listen for the form beeing submitted
   $("#comment-form").submit(function(){
      //get the url for the form

      var url="{{ asset('myboard/addcomment/') }}";
      url=url+"{{board.Id}}";
      
      if($("#comment-form textarea").val()=="") {
        $("#comment-container").fadeOut();
        return false;
      }

$("#comment-form textarea").val()
       $("#submit-comment").attr("disabled","true");
       $(".modal-footer").css("cursor","progress");
       $.post(url,{
           content:$("#comment-form textarea").val(),
           size:$("#comment-area").css("font-size"),
           font:$("#font-selector").val(),
           color:$("#color-selector").val(),
           posx:$("#comment-area").offset().top+9,
           posy:$("#comment-area").offset().left+15,
          {%  if not app.user %}
          anonyname:$("#anonyname").val(),
          {%  endif %}
           rotation:$('#comment-area').css('-webkit-transform'),
       },function(data){   
           //the response is in the data variable
            if(data.responseCode==200 ){
              //alert(data.commentId); 
              submit_comment(data.commentId,$("#comment-area").offset().top+9,$("#comment-area").offset().left+15);

            }
           else if(data.responseCode==400){//bad request
              
              
           }
           else{
              //if we got to this point we know that the controller
              //did not return a json_encoded array. We can assume that           
              //an unexpected PHP error occured
              //alert("An unexpeded error occured.");

           }
       });//It is silly. But you should not write 'json' or any thing as the fourth parameter. It should be undefined. I'll explain it futher down

      //we dont what the browser to submit the form
    return false;
   });




(function($) {
    var oldHide = $.fn.popover.Constructor.prototype.hide;

    $.fn.popover.Constructor.prototype.hide = function() {
        if (this.tip().is(":hover")) {
            var that = this;
            // try again after what would have been the delay
            setTimeout(function() {
                return that.hide.call(that, arguments);
            }, that.options.delay.hide);
            return;
        }
        oldHide.call(this, arguments);
    };
})(jQuery);



function setdraggable(id){

  $("#"+id).draggable('enable');
  $("#"+id).draggable();
  $("#"+id).css("border", "2px dotted white");
  $("#"+id).css("cursor","move")

}

function removecomment(id){
  $("#"+id).fadeOut();
  url="{{ asset('removecomment/') }}";
  url=url+id;
  $.get(url);
  //alert(id)

}



function removealbum(id,albumid){
  $("#"+id).fadeOut();
  url="{{ asset('removealbum/') }}";
  url=url+albumid;
  $.get(url);

}

function popoverComment(commentdiv){
   
var myhtml="";
var commentTitle;

{% if roleflag=="Owner" %} 

myhtml="<div class='small-menu-icons' style='display:inherit;' ><img class='move-small' src='{{ asset('pictures/icons/small-move.png')  }}' onClick=setdraggable("+commentdiv.attr('id')+") /><img class='rotate-small' src='{{ asset('pictures/icons/small-rotate.png') }}'  onClick=rotateslider("+commentdiv.attr('id')+") /><img class='delete-small'  src='{{ asset('pictures/icons/small-trash.png') }}'  onClick=removecomment("+commentdiv.attr('id')+") /></div>";

{% endif %}

  var ownerid=commentdiv.attr("ownerid");
  var path="{{ asset('/profil/') }}"+ownerid;

  var trigger="hover";
  var place="top";
  var pos=commentdiv.css("left").replace("px","");
  var postop=commentdiv.css("top").replace("px","");
  var halfwidth=window.innerWidth/2;
  var halfHeight=window.innerHeight/4;
  
  if(postop>halfHeight) place="top";
  else place="bottom";

  if (pos<100) place="right";
  if (pos> window.innerWidth -250) place="left";

  if(commentdiv.css("font-family")=="arrow") {
    commentTitle="-->";
    trigger="click"
  }

  if(commentdiv.css("font-family")=="arrow") {
    commentTitle="-->";
    trigger="click"
  }

  else commentTitle=commentdiv.html();

  var date="few seconds ago";
  if(commentdiv.attr("date"))
    date=commentdiv.attr("date");


  commentdiv.popover({title:"<a href='"+path+"'' class='comment-owner'>"+commentdiv.attr("owner")+" :</a>"+commentTitle+myhtml,html:true,content: date,placement:place,trigger:"hover",delay:{hide: 1000}});

  commentdiv.popover("show");
  $(".move-small").tooltip({title:"move"});
  $(".rotate-small").tooltip({title:"rotate"});
  $(".delete-small").tooltip({title:"delete"});

}


 


$(".comment").mouseenter(function(){
  comment=$(this);
  popoverComment(comment);
});





$(".album img").mouseenter(function(){
  picture=$(this);
//  popoverPicture(picture);
});


 //-------------------------------------------------------------------------------------------------------------------

 var oldposition;
 var oldId;
 function rotateslider(id,type){
  /*Slider */


  oldposition=$("#"+id).css("-webkit-transform");
  oldId=id;
  $("#"+id).attr("oldposition",oldposition);
  var top=$("#"+id).css("top");
  var left=$("#"+id).css("left");
  var width=$("#"+id).css("width");

if(type=="pic"){

   top=$("#"+id).css("top");
   left=$("#"+id).css("left");
   width=$("#"+id).css("width");
  $("#formRotateComment").attr("pictureId",$("#"+id).attr("albumId"));
  $("#formRotateComment").removeAttr("commentId");
}

  else   {
      $("#formRotateComment").attr("commentId",id);
      $("#formRotateComment").removeAttr("pictureId");
  } 

   $("#slider-container").css("left",left);
   $("#slider-container").css("top",top);
   $("#slider-container").css("min-width",width);


  $("#slider-container").fadeIn();
  $('.slider-input').each(function() {
      var currVal = $(this).val();
      if(currVal < 0){
        currVal = 0;
      }
    $(this).parent().children('.slider-content').slider({
      'animate': true, 
      'min': -1, 
      'max': 201,
      'value' : 100,
      'orientation' : 'vertical',
      'stop': function(e, ui){
        $(".rotate-buttons").fadeIn();
      },
      'slide': function(e, ui){
        var percentLeft;
        var submitValue;
        var Y = ui.value - 100; //Find center of Circle (We're using a max value and height of 200)
        var R = 100; //Circle's radius
        var skip = false;
        
        $(this).children('.ui-slider-handle').attr('href',' UI.val = ' + ui.value);
        
        //Show default/disabled/out of bounds state
        if ( ui.value > 0 && ui.value < 201 ) { //if in the valid slide rang
          $(this).children('.ui-slider-handle').addClass('is-active');
        }
        else {
          $(this).children('.ui-slider-handle').removeClass('is-active');
        }
        
        //Calculate slider's path on circle, put it there, by setting background-position
        if ( ui.value >= 0 && ui.value <= 200 ) { //if in valid range, these are one inside the min and max
          var X = Math.sqrt((R*R) - (Y*Y)); //X^2 + Y^2 = R^2. Find X.
          if ( X == 'NaN' ) {
            percentLeft = 0;
          }
          else {
            percentLeft = X;          
          }
        }
        else if ( ui.value == -1 || ui.value == 201 ) {
          percentLeft = 0;
          skip = true;
        }
        else {
          percentLeft = 0;
        }
        
        //Move handle
        if ( percentLeft > 100 ) { percentLeft = 100; } 
        $(this).children('.ui-slider-handle').css('background-position',percentLeft +'% 100%'); //set css sprite

        //Figure out and set input value
        if ( skip == true ) {
          submitValue = 'fail';
          $(this).children('.ui-slider-handle').css('background-position',percentLeft +'% 0%'); //reset css sprite          
        }
        else {
          submitValue = Math.round(ui.value / 2); //Clamp input value to range 0 - 100
        }     
        var rotation=-2*submitValue+100;
        $("#"+id).css("-webkit-transform","rotate("+rotation+"deg)");
        
      }
    });
  });
  

}

{%  if app.user %}
 //-------------------------------------------------------------------------------------------------------------
var Friendevents="";
function getEvents(){

       $.get("{{ path('get_ajax_requests')}}", //replace it with the secssion
        function(data){   
           //the response is in the data variable
            if(data.responseCode==200 ){
                  
           
                 Friendevents=data.htmlcode;
                 $("#Friend-requests").popover({title:function() {
                  
                  return Friendevents;                        
                                                                      },html:true,placement:"bottom"});
                 


        
            }
           else if(data.responseCode==400){//bad request
              
              
           }
           else{
              //if we got to this point we know that the controller
              //did n
             // return a json_encoded array. We can assume that           
              //an unexpected PHP error occured
              //alert("An unexpeded error occured.");

           }
         }
       );

}

//--------------------------------------------------------------------------------------------------------------

var Fmessages="";
function getMessages(){

       $.get("{{ path('get_ajax_messages')}}", //replace it with the session
        function(data){   
           //the response is in the data variable
            if(data.responseCode==200 ){
                  
           
                 Fmessages=data.htmlcode;
                 $("#messages").popover({title:function() {
                  
                  return Fmessages;                        
                                                                      },html:true,placement:"bottom"});
                 


        
            }
           else if(data.responseCode==400){//bad request
              
              
           }
           else{
              //if we got to this point we know that the controller
              //did n
             // return a json_encoded array. We can assume that           
              //an unexpected PHP error occured
              //alert("An unexpeded error occured.");

           }
         }
       );

}



//var intervall=setInterval(getEvents,7000);
 getEvents();
 getMessages();

$("#Friend-requests").mouseenter(function(){
  getEvents();
});

$("#messages").mouseenter(function(){
 getMessages();
});



{%  endif %}
function changeViewPrivacy(argum){

     var valeur;

      if(argum=="friends") {valeur="Friends<span class='submenu-icons-black friends-icon'></span>";}
      if(argum=="owner") {valeur="Only Me<span class='submenu-icons-black onlyme-icon'></span>";}
      if(argum=="public") {valeur="Everyone<span class='submenu-icons-black everyone-icon'></span>";}
     
      $("#viewprivacytoggle").html(valeur);

      var url="{{ asset('board/changeprivacyview/') }}";
      url=url+{{board.Id}};
       //start send the post request
       $.get(url,{
           privacy:argum,
      },function(data){   
           //the response is in the data variable
            if(data.responseCode==200 ){
            //  alert(data.resultat); 
            }
           else if(data.responseCode==400){//bad request
              
              
           }
           else{
              //if we got to this point we know that the controller
              //did not return a json_encoded array. We can assume that           
              //an unexpected PHP error occured
              //alert("An unexpeded error occured.");

           }
       });//It is silly. But you should not write 'json' or any thing as the fourth parameter. It should be undefined. I'll explain it futher down


}


function addArrow(id){
// add an Arrrow

  
      var url="{{ asset('myboard/addcomment/') }}";
      url=url+"{{board.Id}}";

       $.post(url,{
           content:id,
           size:25,
           font:"arrow",
           color:id+"whitearrow.png",
           posx:200,
           posy:300,
           rotation:$('#comment-area').css('-webkit-transform'),
       },function(data){   
           //the response is in the data variable
            if(data.responseCode==200 ){
              //alert(data.commentId); 
              submit_arrow(data.commentId,id,200,400);

            }
           else if(data.responseCode==400){//bad request
              
              
           }
           else{
              //if we got to this point we know that the controller
              //did not return a json_encoded array. We can assume that           
              //an unexpected PHP error occured
              //alert("An unexpeded error occured.");

           }
       });//It is silly. But you should not write 'json' or any thing as the fourth parameter. It should be undefined. I'll explain it futher down

}


function changeCommentPrivacy(argum){
      var url="{{ asset('board/changeprivacycomment/') }}";
      url=url+{{board.Id}};
      var valeur;

      if(argum=="friends") {valeur="Friends<span class='submenu-icons-black friends-icon'></span>";}
      if(argum=="owner") {valeur="Only Me<span class='submenu-icons-black onlyme-icon'></span>";}
      if(argum=="public") {valeur="Everyone<span class='submenu-icons-black everyone-icon'></span>";}
     
      $("#commentprivacytoggle").html(valeur);

       //start send the post request
       $.get(url,{
           privacy:argum,
      },function(data){   
           //the response is in the data variable
            if(data.responseCode==200 ){
            //  alert(data.resultat); 
            }
           else if(data.responseCode==400){//bad request
              
              
           }
           else{
              //if we got to this point we know that the controller
              //did not return a json_encoded array. We can assume that           
              //an unexpected PHP error occured
              //alert("An unexpeded error occured.");

           }
       });//It is silly. But you should not write 'json' or any thing as the fourth parameter. It should be undefined. I'll explain it futher down


}


var settings="";
var commentprivacy='{{board.Commentprivacy}}';
var viewprivacy='{{board.Viewprivacy}}';

var likes="<button class='btn btn-sm btn-default like'>Like <img src='{{asset('pictures/icons/like.png')}}' /></buttons><button class='btn btn-sm btn-default unlike'><img src='{{asset('pictures/icons/unlike.png')}}'></button></div>";
var htmlcontentForboardtitle="<div class='notification' style='padding:7px;'><b><h4>{{board.title}}</h4></b><p style='color: #B6B6B6;'>{{board.description}}</p>"+likes+settings+"</div>";
$("#board-title").popover({title:htmlcontentForboardtitle,html:true,placement:"bottom",trigger:"hover",delay:{hide: 1500}});

var menucompressed=false;

$("#arrows").popover({title:"<img class='btn btn-default arrow-prview' onClick='addArrow(1)' src='{{asset('pictures/icons/firstblackarrow.png')}}' style='height:36px'><img class='btn btn-default arrow-prview' src='{{asset('pictures/icons/secondblackarrow.png')}}' style='height:36px' onClick='addArrow(2)'>",html:true,placement:"bottom",trigger:"hover",delay:{hide: 1500}});





$(".menu-primary-options").mouseenter(function(){
  var sub_item=$(this);
  setTimeout(function(){

    if(!sub_item.is(":hover")) return false;
    $(".side-main-menu").animate({width: "40px"}, 200);
    $("#board-title2").fadeOut(10);
    $(".label-icon").fadeOut(10);
    $("#likesunlikes").fadeOut(10);
    $(".sosNeticonWhite").animate({"margin-left": "-20px"}, 100);
    var focusId=sub_item.attr("submenuId");
  

    $(".submenu").css("display","block");
    $("#submenu1").css('z-index','10');
    $("#submenu2").css('z-index','10');
    $("#submenu3").css('z-index','10');
    $("#submenu4").css('z-index','10');
    $("#submenu5").css('z-index','10');
    $("#submenu"+focusId).css('z-index','11');
    
    iconclass=$("#menuicon1").attr("class");
    if(iconclass!=null)
    $("#menuicon1").attr("class",iconclass.replace("Black","White"));

    iconclass=$("#menuicon2").attr("class");
    if(iconclass!=null)
    $("#menuicon2").attr("class",iconclass.replace("Black","White"));

    iconclass=$("#menuicon3").attr("class");  
    if(iconclass!=null)
    $("#menuicon3").attr("class",iconclass.replace("Black","White"));

    iconclass=$("#menuicon4").attr("class");  
    if(iconclass!=null)
    $("#menuicon4").attr("class",iconclass.replace("Black","White"));

    iconclass=$("#menuicon5").attr("class");  
    if(iconclass!=null)
    $("#menuicon5").attr("class",iconclass.replace("Black","White"));


    iconclass=$("#menuicon"+focusId).attr("class");
    $("#menuicon"+focusId).attr("class",iconclass.replace("White","Black"));
    // alert(focusId);
  
    
    $(".menu-primary-options").css("background-color","rgb(31, 34, 40)");
    sub_item.css("background-color","#f2f6f7");

},100)});






$("#side-main-menu-container").mouseleave(function(){

    var iconclass=$("#menuicon1").attr("class");  
    if(iconclass!=null)
    $("#menuicon1").attr("class",iconclass.replace("Black","White"));
  
    iconclass=$("#menuicon2").attr("class");  
    if(iconclass!=null)
    $("#menuicon2").attr("class",iconclass.replace("Black","White"));

    iconclass=$("#menuicon3").attr("class");  
    if(iconclass!=null)
    $("#menuicon3").attr("class",iconclass.replace("Black","White"));

    iconclass=$("#menuicon4").attr("class");  
    if(iconclass!=null)
    $("#menuicon4").attr("class",iconclass.replace("Black","White"));

    iconclass=$("#menuicon5").attr("class");  
    if(iconclass!=null)
    $("#menuicon5").attr("class",iconclass.replace("Black","White"));


    $(".menu-primary-options").css("background-color","#1f2228");

    if(menucompressed==false){
        $(".side-main-menu").animate({width: "175px"}, 200);
        $(".sosNeticonWhite").animate({"margin-left": "0px"}, 100);
        $(".label-icon").delay(350).fadeIn();
        $("#likesunlikes").delay(350).fadeIn();
        $("#board-title2").delay(350).fadeIn();
    }
    else $(".submenu").fadeOut();
   


});


  function compressMenu(){
    $(".side-main-menu").animate({width: "40px"}, 200);
    $("#board-title2").fadeOut(10);
    $(".label-icon").fadeOut(10);
    $("#likesunlikes").fadeOut(10);
    $(".sosNeticonWhite").animate({"margin-left": "-20px"}, 100);
    $(".submenu").css("display","none");
    menucompressed=true;
    $("#compress-menu").attr("onClick","uncompressMenu()");
    $("#compress-menu").css("background-position","258px 364px");

  }

  function uncompressMenu(){

        $(".side-main-menu").animate({width: "175px"}, 200);
        $(".sosNeticonWhite").animate({"margin-left": "0px"}, 100);
        $(".label-icon").delay(350).fadeIn();
        $("#likesunlikes").delay(350).fadeIn();
        $("#board-title2").delay(350).fadeIn();
        menucompressed=false;
        $("#compress-menu").attr("onClick","compressMenu()");
        $("#compress-menu").css("background-position","201px 364px");
  }


 



$('.lightbox').mouseenter(function(){

  $(this).parent().find('span').fadeIn();
  var pos=$(this).parent().css("top").replace("px","");

  if(pos<5)  $(this).parent().find('span').animate({top: "250px"}, 200);
  else  $(this).parent().find('span').animate({top: "-20px"}, 200);
});

// $('.lightbox').parent().parent().parent().mouseleave(function(){

//   $(this).parent().find('span').fadeIn();
//   $(this).parent().find('span').animate({top: "0px"}, 200);

// });


{%  if app.user %}

function checkunseen(){
        var url="{{asset('events/getunseen')}}";
       $.get(url,function(data){   
           //the response is in the data variable
            if(data.responseCode==200 ){
              var unseenmessages=data.unseenmessages; 
              var unseenevents=data.unseenevents;
              if(unseenmessages>0) {
                $("#messages").attr("src","{{asset('pictures/icons/chat-small-red.png')}}").css('opacity','1');
                getMessages();
              }
              else $("#messages").attr("src","{{asset('pictures/icons/chat-small.png')}}").css('opacity','0.7');

             if(unseenevents>0) {
              $("#Friend-requests").attr("src","{{asset('pictures/icons/flag-red.png')}}").css('opacity','1');
              getEvents();
             }
             else $("#Friend-requests").attr("src","{{asset('pictures/icons/flag.png')}}").css('opacity','0.7');
            
            }
           else if(data.responseCode==400){//bad request
              
                
           }
           else{
              //if we got to this point we know that the controller
              //did not return a json_encoded array. We can assume that           
              //an unexpected PHP error occured
              //alert("An unexpeded error occured.");

           }
       });//It is silly. But you should not write 'json' or any thing as the fourth parameter. It should be undefined. I'll explain it futher down
}

$("#messages").click(function(){
  $("#Friend-requests").popover("hide");
  hideMainMenue();
  $(this).attr("src","{{asset('pictures/icons/chat-small.png')}}").css('opacity','0.7');
  var eventsurl="{{ path('reset_unseen_messages') }}"
  $.get(eventsurl);
})

function resetPrevious(){
  $("#slider-container").fadeOut();
  $("#"+oldId).css("-webkit-transform",oldposition);
}

function submitRotation(){
  $("#slider-container").fadeOut();
}



checkunseen();
var intervall=setInterval(checkunseen,5000);
{% endif %}

function displayMainMenue(){
  $("#messages").popover("hide");
  $("#Friend-requests").popover("hide");
  $("#main-menu-dropdown").fadeIn();
  $("#myname").attr("onClick","hideMainMenue()");
}

function hideMainMenue(){
  $("#main-menu-dropdown").fadeOut();
  $("#myname").attr("onClick","displayMainMenue()");
}

{%  if not board.songs.get(0) and roleflag=="Owner" %}
  $("#upload-song").tooltip({title:"upload a song",placement:"bottom"});
{%  endif %} 
  $(".jp-play").tooltip({title:"Play",placement:"bottom"});
  $(".jp-pause").tooltip({title:"Pause",placement:"bottom"});
  $("#playbutton").tooltip({title:"Play",placement:"bottom"});
  $("#home").tooltip({title:"Home page",placement:"bottom"});





function likeboard(){
  var nbr= document.getElementById("nbrOfLikes").innerHTML;
  nbr++;
  document.getElementById("nbrOfLikes").innerHTML=nbr;
  $("#likeimg").css("opacity","1");
  // $("#likeimg").attr("src","{{asset('pictures/icons/like-red.png')}}");

  url="{{ asset('like/') }}{{board.Id}}";
  $.get(url);
  $("#likeimg").attr("onClick","unlikeboard()");
}



function unlikeboard(){
  var nbr= document.getElementById("nbrOfLikes").innerHTML;
  nbr--;
  document.getElementById("nbrOfLikes").innerHTML=nbr;
  $("#likeimg").css("opacity","0.7");  
  // $("#likeimg").attr("src","{{asset('pictures/icons/like.png')}}");
  url="{{ asset('unlike/') }}{{board.Id}}";
  $.get(url);
  $("#likeimg").attr("onClick","likeboard()");
}



var wiss;

$(".submenu-item").mouseenter(function(){

  var subclass=$(this).find("span").attr("class");
  wiss=$(this).find("span");
  subclass=subclass.replace("submenu-icons-black","submenu-icons-white");
  $(this).find("span").first().attr("class",subclass);

});


$(".submenu-item").mouseleave(function(){

  var subclass=$(this).find("span").attr("class");
  wiss=$(this).find("span");
  subclass=subclass.replace("submenu-icons-white","submenu-icons-black");
  $(this).find("span").first().attr("class",subclass);

});


function setPredefinedBackground(src){
  
  $("#background-preview-group img").attr("class","small-background-preview")
  src.setAttribute("class","selected small-background-preview")
  $("#predefinedbackgroud").attr("value",src.getAttribute("src"));


  $("body").css("background-image","url("+src.getAttribute("src")+")")

}


$("#fileUpload").click(function(){
    $("#predefinedbackgroud").attr("value","");
})

function resetBackground(){
  {% if board.Coverurl %}
    var url="{{asset('web/uploads/tmp/attachments/')}}"+"{{board.Coverurl}}";
  {% else %}
    var url="{{asset('pictures/background/default.jpg')}}";
  {% endif %}

$("body").css("background-image","url("+url+")");
}



      var can;
function convertCanvasToImage(canvas) {
        return  canvas.toDataURL("image/jpeg",0.05);
      }

function take_screen(){

      var img;
      $("#background-pic").css("display","inherit");
      $("#side-main-menu-container").css("display","none");
      $("#header").css("display","none");
      html2canvas(document.body, {
            onrendered: function(canvas) {
                $("#side-main-menu-container").fadeIn(0);
                $("#header").fadeIn(0);   
                $("#background-pic").css("display","none");
                can=canvas;

                img=convertCanvasToImage(canvas);
                 $.ajax({
                          type: "POST",
                          url: "{{ path('upload_screen_shot', { boardId: board.Id }) }}",
                          data: {file:img}
                                }).done(function( respond ) {
                                  console.log(respond);
                                });           
            }
        });

}


</script>
</html><!-- all rights reserved ruspeena.com